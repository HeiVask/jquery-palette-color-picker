/**
 * JQuery Palette Color Picker v1.0 by Carlos Cabo ( @putuko )
 * https://github.com/carloscabo/jquery-palette-color-picker
 */
!function(t){"use strict";t.paletteColorPicker=function(e,s){var a="palette-color-picker",i=t(e),o=this,n=i.val(),r=i.attr("name"),c=t("<div>").addClass(a+"-button").attr("data-target",r),l=t("<div>").addClass(a+"-bubble"),u={custom_class:null,colors:null,position:"upside",insert:"before",clear_btn:"first",timeout:2e3};o.init=function(){o.settings=t.extend({},u,s),null===o.settings.colors&&(o.settings.colors=i.data("palette")),"string"==typeof o.settings.colors[0]&&(o.settings.colors=t.map(o.settings.colors,function(t,e){var s={};return s[t]=t,s})),o.settings.insert=o.settings.insert.charAt(0).toUpperCase()+o.settings.insert.slice(1),o.settings.custom_class&&l.addClass(o.settings.custom_class),t.each(o.settings.colors,function(e,s){var a=Object.keys(s),i=s[a],o=t("<span>").addClass("swatch").attr("title",a).attr("data-color",i).css("background-color",i);i===n&&(o.addClass("active"),c.css("background",i)),o.appendTo(l)});var e=t("<span>").addClass("swatch clear").attr("title","Clear selection");"last"===o.settings.clear_btn?e.addClass("last").appendTo(l):e.prependTo(l),o.destroy=function(){c.remove(),t.removeData(i[0])},c.append(l).on("click",function(){var e=t(this);e.toggleClass("active").find("."+a+"-bubble").fadeToggle(),e.hasClass("active")&&(clearTimeout(o.timer),o.timer=setTimeout(function(){e.trigger("pcp.fadeout")},o.settings.timeout))}).on("pcp.fadeout",function(){t(this).removeClass("active").find("."+a+"-bubble").fadeOut()}).on("mouseenter","."+a+"-bubble",function(){clearTimeout(o.timer)}).on("mouseleave","."+a+"-bubble",function(){o.timer=setTimeout(function(){c.trigger("pcp.fadeout")},o.settings.timeout)}).on("click","span.swatch",function(e){var s=t(this).attr("data-color"),i=t("."+a+'-button[data-target="'+t(this).closest("."+a+"-button").attr("data-target")+'"]'),o=t(this).closest("."+a+"-bubble");o.find(".active").removeClass("active"),t(e.target).is(".clear")?(i.removeAttr("style"),s=""):(t(this).addClass("active"),i.css("background",s)),t('[name="'+i.attr("data-target")+'"]').val(s)})["insert"+o.settings.insert](i),("downside"===o.settings.position||i.offset().top+20<l.outerHeight())&&l.addClass("downside")},o.init()},t.fn.paletteColorPicker=function(e){return this.each(function(){"undefined"==typeof t(this).data("paletteColorPickerPlugin")&&t(this).data("paletteColorPickerPlugin",new t.paletteColorPicker(this,e))})}}(jQuery);
